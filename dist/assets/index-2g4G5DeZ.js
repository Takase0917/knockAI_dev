var Re=Object.defineProperty;var Ue=(e,t,n)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Gt=(e,t,n)=>Ue(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function S(){}const Xt=e=>e;function $e(e){return e()}function de(){return Object.create(null)}function W(e){e.forEach($e)}function Rt(e){return typeof e=="function"}function $t(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let St;function pe(e,t){return e===t?!0:(St||(St=document.createElement("a")),St.href=t,e===St.href)}function He(e){return Object.keys(e).length===0}function me(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const xe=typeof window<"u";let we=xe?()=>window.performance.now():()=>Date.now(),Yt=xe?e=>requestAnimationFrame(e):S;const dt=new Set;function ke(e){dt.forEach(t=>{t.c(e)||(dt.delete(t),t.f())}),dt.size!==0&&Yt(ke)}function Ce(e){let t;return dt.size===0&&Yt(ke),{promise:new Promise(n=>{dt.add(t={c:e,f:n})}),abort(){dt.delete(t)}}}function o(e,t){e.appendChild(t)}function De(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Ie(e){const t=f("style");return t.textContent="/* empty */",Be(De(e),t),t.sheet}function Be(e,t){return o(e.head||e,t),t.sheet}function M(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function Ee(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function st(e){return document.createTextNode(e)}function b(){return st(" ")}function U(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function gt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function a(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ze(e){return Array.from(e.childNodes)}function _e(e,t){t=""+t,e.data!==t&&(e.data=t)}function Z(e,t){e.value=t??""}function Ne(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}const At=new Map;let Tt=0;function Ve(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ge(e,t){const n={stylesheet:Ie(t),rules:{}};return At.set(e,n),n}function je(e,t,n,l,s,r,i,c=0){const p=16.666/l;let u=`{
`;for(let h=0;h<=1;h+=p){const $=t+(n-t)*r(h);u+=h*100+`%{${i($,1-$)}}
`}const m=u+`100% {${i(n,1-n)}}
}`,d=`__svelte_${Ve(m)}_${c}`,_=De(e),{stylesheet:v,rules:g}=At.get(_)||Ge(_,e);g[d]||(g[d]=!0,v.insertRule(`@keyframes ${d} ${m}`,v.cssRules.length));const C=e.style.animation||"";return e.style.animation=`${C?`${C}, `:""}${d} ${l}ms linear ${s}ms 1 both`,Tt+=1,d}function Jt(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),s=n.length-l.length;s&&(e.style.animation=l.join(", "),Tt-=s,Tt||Ke())}function Ke(){Yt(()=>{Tt||(At.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&A(t)}),At.clear())})}let vt;function yt(e){vt=e}function Le(){if(!vt)throw new Error("Function called outside component initialization");return vt}function Pe(e){Le().$$.on_mount.push(e)}function Zt(){const e=Le();return(t,n,{cancelable:l=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=Ne(t,n,{cancelable:l});return s.slice().forEach(i=>{i.call(e,r)}),!r.defaultPrevented}return!0}}function Je(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const ft=[],qt=[];let pt=[];const Qt=[],Qe=Promise.resolve();let Wt=!1;function We(){Wt||(Wt=!0,Qe.then(Oe))}function V(e){pt.push(e)}function Se(e){Qt.push(e)}const Kt=new Set;let ut=0;function Oe(){if(ut!==0)return;const e=vt;do{try{for(;ut<ft.length;){const t=ft[ut];ut++,yt(t),Xe(t.$$)}}catch(t){throw ft.length=0,ut=0,t}for(yt(null),ft.length=0,ut=0;qt.length;)qt.pop()();for(let t=0;t<pt.length;t+=1){const n=pt[t];Kt.has(n)||(Kt.add(n),n())}pt.length=0}while(ft.length);for(;Qt.length;)Qt.pop()();Wt=!1,Kt.clear(),yt(e)}function Xe(e){if(e.fragment!==null){e.update(),W(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(V)}}function Ye(e){const t=[],n=[];pt.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),pt=t}let bt;function Ae(){return bt||(bt=Promise.resolve(),bt.then(()=>{bt=null})),bt}function Ft(e,t,n){e.dispatchEvent(Ne(`${t?"intro":"outro"}${n}`))}const Ot=new Set;let tt;function te(){tt={r:0,c:[],p:tt}}function ee(){tt.r||W(tt.c),tt=tt.p}function O(e,t){e&&e.i&&(Ot.delete(e),e.i(t))}function Q(e,t,n,l){if(e&&e.o){if(Ot.has(e))return;Ot.add(e),tt.c.push(()=>{Ot.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}const Te={duration:0};function et(e,t,n){const l={direction:"in"};let s=t(e,n,l),r=!1,i,c,p=0;function u(){i&&Jt(e,i)}function m(){const{delay:_=0,duration:v=300,easing:g=Xt,tick:C=S,css:h}=s||Te;h&&(i=je(e,0,1,v,_,g,h,p++)),C(0,1);const $=we()+_,j=$+v;c&&c.abort(),r=!0,V(()=>Ft(e,!0,"start")),c=Ce(w=>{if(r){if(w>=j)return C(1,0),Ft(e,!0,"end"),u(),r=!1;if(w>=$){const B=g((w-$)/v);C(B,1-B)}}return r})}let d=!1;return{start(){d||(d=!0,Jt(e),Rt(s)?(s=s(l),Ae().then(m)):m())},invalidate(){d=!1},end(){r&&(u(),r=!1)}}}function Ut(e,t,n){const l={direction:"out"};let s=t(e,n,l),r=!0,i;const c=tt;c.r+=1;let p;function u(){const{delay:m=0,duration:d=300,easing:_=Xt,tick:v=S,css:g}=s||Te;g&&(i=je(e,1,0,d,m,_,g));const C=we()+m,h=C+d;V(()=>Ft(e,!1,"start")),"inert"in e&&(p=e.inert,e.inert=!0),Ce($=>{if(r){if($>=h)return v(0,1),Ft(e,!1,"end"),--c.r||W(c.c),!1;if($>=C){const j=_(($-C)/d);v(1-j,j)}}return r})}return Rt(s)?Ae().then(()=>{s=s(l),u()}):u(),{end(m){m&&"inert"in e&&(e.inert=p),m&&s.tick&&s.tick(1,0),r&&(i&&Jt(e,i),r=!1)}}}function Mt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function qe(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function Ht(e){e&&e.c()}function xt(e,t,n){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),V(()=>{const r=e.$$.on_mount.map($e).filter(Rt);e.$$.on_destroy?e.$$.on_destroy.push(...r):W(r),e.$$.on_mount=[]}),s.forEach(V)}function wt(e,t){const n=e.$$;n.fragment!==null&&(Ye(n.after_update),W(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ze(e,t){e.$$.dirty[0]===-1&&(ft.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function kt(e,t,n,l,s,r,i=null,c=[-1]){const p=vt;yt(e);const u=e.$$={fragment:null,ctx:[],props:r,update:S,not_equal:s,bound:de(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:de(),dirty:c,skip_bound:!1,root:t.target||p.$$.root};i&&i(u.root);let m=!1;if(u.ctx=n?n(e,t.props||{},(d,_,...v)=>{const g=v.length?v[0]:_;return u.ctx&&s(u.ctx[d],u.ctx[d]=g)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](g),m&&Ze(e,d)),_}):[],u.update(),m=!0,W(u.before_update),u.fragment=l?l(u.ctx):!1,t.target){if(t.hydrate){const d=ze(t.target);u.fragment&&u.fragment.l(d),d.forEach(A)}else u.fragment&&u.fragment.c();t.intro&&O(e.$$.fragment),xt(e,t.target,t.anchor),Oe()}yt(p)}class Ct{constructor(){Gt(this,"$$");Gt(this,"$$set")}$destroy(){wt(this,1),this.$destroy=S}$on(t,n){if(!Rt(n))return S;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!He(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const tn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(tn);function en(e){let t;return{c(){t=f("button"),t.textContent="ログイン",a(t,"class","bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600")},m(n,l){M(n,t,l)},p:S,d(n){n&&A(t)}}}function nn(e){let t,n,l,s,r,i;function c(m,d){return en}let u=c()(e);return{c(){t=f("header"),n=f("div"),l=f("div"),s=f("h1"),s.textContent="木製建具見積もりAI",r=b(),i=f("div"),u.c(),a(s,"class","text-2xl font-bold text-gray-800"),a(i,"class","flex items-center space-x-4"),a(l,"class","flex justify-between items-center"),a(n,"class","container mx-auto px-4 py-4"),a(t,"class","bg-white shadow-md")},m(m,d){M(m,t,d),o(t,n),o(n,l),o(l,s),o(l,r),o(l,i),u.m(i,null)},p(m,[d]){u.p(m,d)},i:S,o:S,d(m){m&&A(t),u.d()}}}function ln(e){return Pe(()=>{}),[]}class rn extends Ct{constructor(t){super(),kt(this,t,ln,nn,$t,{})}}function sn(e){const t=e-1;return t*t*t+1}function It(e,{delay:t=0,duration:n=400,easing:l=Xt}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:l,css:r=>`opacity: ${r*s}`}}function nt(e,{delay:t=0,duration:n=400,easing:l=sn,x:s=0,y:r=0,opacity:i=0}={}){const c=getComputedStyle(e),p=+c.opacity,u=c.transform==="none"?"":c.transform,m=p*(1-i),[d,_]=me(s),[v,g]=me(r);return{delay:t,duration:n,easing:l,css:(C,h)=>`
			transform: ${u} translate(${(1-C)*d}${_}, ${(1-C)*v}${g});
			opacity: ${p-m*h}`}}function on(e){let t;return{c(){t=st("次へ進む")},m(n,l){M(n,t,l)},d(n){n&&A(t)}}}function an(e){let t;return{c(){t=f("span"),t.textContent="処理中...",a(t,"class","loading-pulse")},m(n,l){M(n,t,l)},d(n){n&&A(t)}}}function cn(e){let t,n,l,s,r,i,c,p,u,m,d,_,v,g,C,h,$,j,w,B,L,q,z,D,G,x,H,I,T,y,F,X;function Y(k,K){return k[4]?an:on}let lt=Y(e),R=lt(e);return{c(){t=f("div"),n=f("div"),l=f("h2"),l.textContent="見積り基本情報",s=b(),r=f("form"),i=f("div"),c=f("label"),c.innerHTML='案件名 <span class="text-red-500">*</span>',p=b(),u=f("input"),m=b(),d=f("div"),_=f("label"),_.innerHTML='顧客名 <span class="text-red-500">*</span>',v=b(),g=f("input"),C=b(),h=f("div"),$=f("label"),$.textContent="希望納期",j=b(),w=f("input"),B=b(),L=f("div"),q=f("label"),q.textContent="要件・備考",z=b(),D=f("textarea"),G=b(),x=f("div"),H=f("button"),R.c(),a(l,"class","text-xl font-bold mb-6"),a(c,"class","block text-gray-700 mb-2"),a(c,"for","projectName"),a(u,"type","text"),a(u,"id","projectName"),a(u,"class","w-full px-3 py-2 border rounded-md input-focus"),a(u,"placeholder","例：○○邸 木製建具工事"),u.required=!0,a(_,"class","block text-gray-700 mb-2"),a(_,"for","clientName"),a(g,"type","text"),a(g,"id","clientName"),a(g,"class","w-full px-3 py-2 border rounded-md input-focus"),a(g,"placeholder","例：株式会社○○"),g.required=!0,a($,"class","block text-gray-700 mb-2"),a($,"for","deadline"),a(w,"type","date"),a(w,"id","deadline"),a(w,"class","w-full px-3 py-2 border rounded-md input-focus"),a(q,"class","block text-gray-700 mb-2"),a(q,"for","requirements"),a(D,"id","requirements"),a(D,"class","w-full px-3 py-2 border rounded-md input-focus"),a(D,"rows","4"),a(D,"placeholder","特記事項があればご記入ください"),a(H,"type","submit"),a(H,"class","btn-hover bg-blue-500 text-white px-6 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed"),H.disabled=e[4],a(x,"class","flex justify-end pt-4"),a(r,"class","space-y-4"),a(n,"class","bg-white p-6 rounded-lg shadow-md"),a(t,"class","max-w-2xl mx-auto")},m(k,K){M(k,t,K),o(t,n),o(n,l),o(n,s),o(n,r),o(r,i),o(i,c),o(i,p),o(i,u),Z(u,e[0]),o(r,m),o(r,d),o(d,_),o(d,v),o(d,g),Z(g,e[1]),o(r,C),o(r,h),o(h,$),o(h,j),o(h,w),Z(w,e[2]),o(r,B),o(r,L),o(L,q),o(L,z),o(L,D),Z(D,e[3]),o(r,G),o(r,x),o(x,H),R.m(H,null),y=!0,F||(X=[U(u,"input",e[6]),U(g,"input",e[7]),U(w,"input",e[8]),U(D,"input",e[9]),U(r,"submit",gt(e[5]))],F=!0)},p(k,[K]){K&1&&u.value!==k[0]&&Z(u,k[0]),K&2&&g.value!==k[1]&&Z(g,k[1]),K&4&&Z(w,k[2]),K&8&&Z(D,k[3]),lt!==(lt=Y(k))&&(R.d(1),R=lt(k),R&&(R.c(),R.m(H,null))),(!y||K&16)&&(H.disabled=k[4])},i(k){y||(k&&V(()=>{y&&(T&&T.end(1),I=et(t,nt,{y:20,duration:400,delay:200}),I.start())}),y=!0)},o(k){I&&I.invalidate(),k&&(T=Ut(t,It,{})),y=!1},d(k){k&&A(t),R.d(),k&&T&&T.end(),F=!1,W(X)}}}function un(e,t,n){const l=Zt();let s="",r="",i="",c="",p=!1;async function u(){if(!s||!r){alert("必須項目を入力してください");return}n(4,p=!0),await new Promise(g=>setTimeout(g,800)),l("next",{projectName:s,clientName:r,deadline:i,requirements:c}),n(4,p=!1)}function m(){s=this.value,n(0,s)}function d(){r=this.value,n(1,r)}function _(){i=this.value,n(2,i)}function v(){c=this.value,n(3,c)}return[s,r,i,c,p,u,m,d,_,v]}class fn extends Ct{constructor(t){super(),kt(this,t,un,cn,$t,{})}}function he(e,t,n){const l=e.slice();return l[13]=t[n],l}function be(e){let t,n,l=Mt(e[2]),s=[];for(let i=0;i<l.length;i+=1)s[i]=ge(he(e,l,i));const r=i=>Q(s[i],1,1,()=>{s[i]=null});return{c(){t=f("div");for(let i=0;i<s.length;i+=1)s[i].c();a(t,"class","mt-6 grid grid-cols-2 gap-4")},m(i,c){M(i,t,c);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(t,null);n=!0},p(i,c){if(c&4){l=Mt(i[2]);let p;for(p=0;p<l.length;p+=1){const u=he(i,l,p);s[p]?(s[p].p(u,c),O(s[p],1)):(s[p]=ge(u),s[p].c(),O(s[p],1),s[p].m(t,null))}for(te(),p=l.length;p<s.length;p+=1)r(p);ee()}},i(i){if(!n){for(let c=0;c<l.length;c+=1)O(s[c]);n=!0}},o(i){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)Q(s[c]);n=!1},d(i){i&&A(t),Ee(s,i)}}}function ge(e){let t,n,l,s,r,i,c;return{c(){t=f("div"),n=f("img"),s=b(),pe(n.src,l=e[13])||a(n,"src",l),a(n,"alt","プレビュー"),a(n,"class","w-full h-full object-cover rounded-md"),a(t,"class","relative aspect-video")},m(p,u){M(p,t,u),o(t,n),o(t,s),c=!0},p(p,u){(!c||u&4&&!pe(n.src,l=p[13]))&&a(n,"src",l)},i(p){c||(p&&V(()=>{c&&(i&&i.end(1),r=et(t,nt,{y:20,duration:300}),r.start())}),c=!0)},o(p){r&&r.invalidate(),p&&(i=Ut(t,It,{})),c=!1},d(p){p&&A(t),p&&i&&i.end()}}}function dn(e){let t;return{c(){t=st("見積り結果を表示")},m(n,l){M(n,t,l)},d(n){n&&A(t)}}}function pn(e){let t;return{c(){t=f("span"),t.textContent="アップロード中...",a(t,"class","loading-pulse")},m(n,l){M(n,t,l)},d(n){n&&A(t)}}}function mn(e){let t,n,l,s,r,i,c,p,u,m,d,_,v,g,C,h,$,j,w,B,L,q,z,D,G,x=e[2].length>0&&be(e);function H(y,F){return y[3]?pn:dn}let I=H(e),T=I(e);return{c(){var y;t=f("div"),n=f("div"),l=f("h2"),l.textContent="画像アップロード",s=b(),r=f("div"),i=f("div"),c=f("div"),c.innerHTML=`画像をドラッグ＆ドロップ
          <br/>
          または`,p=b(),u=f("label"),m=f("span"),m.textContent="ファイルを選択",d=b(),_=f("input"),g=b(),x&&x.c(),C=b(),h=f("div"),$=f("button"),$.textContent="戻る",j=b(),w=f("button"),T.c(),a(l,"class","text-xl font-bold mb-6"),a(c,"class","text-gray-600"),a(m,"class","btn-hover bg-blue-500 text-white px-4 py-2 rounded-md cursor-pointer inline-block"),a(_,"type","file"),a(_,"accept","image/*"),_.multiple=!0,a(_,"class","hidden"),a(u,"class","inline-block"),a(i,"class","space-y-4"),a(r,"class",v=`border-2 border-dashed rounded-lg p-8 text-center transition-colors duration-200 ${e[0]?"border-blue-500 bg-blue-50":"border-gray-300"}`),a($,"class","btn-hover text-gray-600 hover:text-gray-800"),a(w,"class","btn-hover bg-blue-500 text-white px-6 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed"),w.disabled=B=!((y=e[1])!=null&&y.length)||e[3],a(h,"class","flex justify-between pt-6"),a(n,"class","bg-white p-6 rounded-lg shadow-md"),a(t,"class","max-w-2xl mx-auto")},m(y,F){M(y,t,F),o(t,n),o(n,l),o(n,s),o(n,r),o(r,i),o(i,c),o(i,p),o(i,u),o(u,m),o(u,d),o(u,_),o(n,g),x&&x.m(n,null),o(n,C),o(n,h),o(h,$),o(h,j),o(h,w),T.m(w,null),z=!0,D||(G=[U(_,"change",e[9]),U(r,"dragenter",gt(e[10])),U(r,"dragleave",gt(e[11])),U(r,"dragover",gt(e[8])),U(r,"drop",gt(e[5])),U($,"click",e[12]),U(w,"click",e[7])],D=!0)},p(y,[F]){var X;(!z||F&1&&v!==(v=`border-2 border-dashed rounded-lg p-8 text-center transition-colors duration-200 ${y[0]?"border-blue-500 bg-blue-50":"border-gray-300"}`))&&a(r,"class",v),y[2].length>0?x?(x.p(y,F),F&4&&O(x,1)):(x=be(y),x.c(),O(x,1),x.m(n,C)):x&&(te(),Q(x,1,1,()=>{x=null}),ee()),I!==(I=H(y))&&(T.d(1),T=I(y),T&&(T.c(),T.m(w,null))),(!z||F&10&&B!==(B=!((X=y[1])!=null&&X.length)||y[3]))&&(w.disabled=B)},i(y){z||(O(x),y&&V(()=>{z&&(q&&q.end(1),L=et(t,nt,{y:20,duration:400,delay:200}),L.start())}),z=!0)},o(y){Q(x),L&&L.invalidate(),y&&(q=Ut(t,It,{})),z=!1},d(y){y&&A(t),x&&x.d(),T.d(),y&&q&&q.end(),D=!1,W(G)}}}function _n(e,t,n){const l=Zt();let s=!1,r,i=[],c=!1;function p(h){var $;h.preventDefault(),n(0,s=!1),($=h.dataTransfer)!=null&&$.files&&u(h.dataTransfer.files)}function u(h){n(1,r=h),n(2,i=[]),Array.from(r).forEach($=>{const j=new FileReader;j.onloadend=()=>{n(2,i=[...i,j.result])},j.readAsDataURL($)})}async function m(){n(3,c=!0),await new Promise(h=>setTimeout(h,1e3)),l("next",{images:r}),n(3,c=!1)}function d(h){Je.call(this,e,h)}return[s,r,i,c,l,p,u,m,d,h=>u(h.target.files),()=>n(0,s=!0),()=>n(0,s=!1),()=>l("back")]}class hn extends Ct{constructor(t){super(),kt(this,t,_n,mn,$t,{})}}function ye(e,t,n){const l=e.slice();return l[7]=t[n],l[9]=n,l}function bn(e){let t,n,l,s,r,i,c,p,u,m=(e[0].projectName||"未設定")+"",d,_,v,g,C,h,$=(e[0].clientName||"未設定")+"",j,w,B,L,q,z,D,G,x,H,I,T,y,F,X,Y,lt,R,k,K,Dt,Bt,ne,it,Et,le,ot,Nt,jt,Fe=e[3].deliveryDate+"",ie,re,Lt,Pt,Me=e[3].notes+"",se,zt,oe,at,mt,ae,ct,_t,ce,ht,Vt,ue,rt=Mt(e[3].materials),P=[];for(let E=0;E<rt.length;E+=1)P[E]=ve(ye(e,rt,E));return{c(){t=f("div"),n=f("div"),l=f("h3"),l.textContent="案件概要",s=b(),r=f("div"),i=f("div"),c=f("p"),c.textContent="案件名",p=b(),u=f("p"),d=st(m),_=b(),v=f("div"),g=f("p"),g.textContent="顧客名",C=b(),h=f("p"),j=st($),B=b(),L=f("div"),q=f("h3"),q.textContent="見積り詳細",z=b(),D=f("div"),G=f("div"),x=f("span"),x.textContent="合計金額（税抜）",H=b(),I=f("span"),I.textContent=`¥${e[3].totalPrice.toLocaleString()}`,T=b(),y=f("div"),F=f("h4"),F.textContent="材料費内訳",X=b(),Y=f("ul");for(let E=0;E<P.length;E+=1)P[E].c();lt=b(),R=f("div"),k=f("h4"),k.textContent="工賃",K=b(),Dt=f("p"),Dt.textContent=`¥${e[3].laborCost.toLocaleString()}`,ne=b(),it=f("div"),Et=f("h3"),Et.textContent="納期・備考",le=b(),ot=f("div"),Nt=f("p"),jt=f("span"),jt.textContent="予定納期：",ie=st(Fe),re=b(),Lt=f("p"),Pt=f("span"),Pt.textContent="備考：",se=st(Me),oe=b(),at=f("div"),mt=f("button"),mt.textContent="戻る",ae=b(),ct=f("div"),_t=f("button"),_t.textContent="PDFで出力",ce=b(),ht=f("button"),ht.textContent="見積りを保存",a(l,"class","text-lg font-semibold mb-4"),a(c,"class","text-gray-600"),a(u,"class","font-medium"),a(g,"class","text-gray-600"),a(h,"class","font-medium"),a(r,"class","grid grid-cols-2 gap-4"),a(n,"class","bg-gray-50 p-4 rounded-md"),a(q,"class","text-lg font-semibold mb-4"),a(x,"class","text-gray-600"),a(I,"class","text-2xl font-bold"),a(G,"class","flex justify-between items-center"),a(F,"class","font-medium mb-2"),a(Y,"class","space-y-2"),a(y,"class","bg-gray-50 p-4 rounded-md"),a(k,"class","font-medium mb-2"),a(Dt,"class","text-right"),a(R,"class","bg-gray-50 p-4 rounded-md"),a(D,"class","space-y-4"),a(L,"class","border-t pt-6"),a(Et,"class","text-lg font-semibold mb-4"),a(jt,"class","text-gray-600"),a(Pt,"class","text-gray-600"),a(ot,"class","space-y-2"),a(it,"class","border-t pt-6"),a(mt,"class","btn-hover text-gray-600 hover:text-gray-800"),a(_t,"class","btn-hover bg-green-500 text-white px-6 py-2 rounded-md"),a(ht,"class","btn-hover bg-blue-500 text-white px-6 py-2 rounded-md"),a(ct,"class","space-x-4"),a(at,"class","flex justify-between pt-6"),a(t,"class","space-y-6")},m(E,J){M(E,t,J),o(t,n),o(n,l),o(n,s),o(n,r),o(r,i),o(i,c),o(i,p),o(i,u),o(u,d),o(r,_),o(r,v),o(v,g),o(v,C),o(v,h),o(h,j),o(t,B),o(t,L),o(L,q),o(L,z),o(L,D),o(D,G),o(G,x),o(G,H),o(G,I),o(D,T),o(D,y),o(y,F),o(y,X),o(y,Y);for(let N=0;N<P.length;N+=1)P[N]&&P[N].m(Y,null);o(D,lt),o(D,R),o(R,k),o(R,K),o(R,Dt),o(t,ne),o(t,it),o(it,Et),o(it,le),o(it,ot),o(ot,Nt),o(Nt,jt),o(Nt,ie),o(ot,re),o(ot,Lt),o(Lt,Pt),o(Lt,se),o(t,oe),o(t,at),o(at,mt),o(at,ae),o(at,ct),o(ct,_t),o(ct,ce),o(ct,ht),Vt||(ue=[U(mt,"click",e[6]),U(_t,"click",e[4]),U(ht,"click",e[5])],Vt=!0)},p(E,J){if(J&1&&m!==(m=(E[0].projectName||"未設定")+"")&&_e(d,m),J&1&&$!==($=(E[0].clientName||"未設定")+"")&&_e(j,$),J&8){rt=Mt(E[3].materials);let N;for(N=0;N<rt.length;N+=1){const fe=ye(E,rt,N);P[N]?(P[N].p(fe,J),O(P[N],1)):(P[N]=ve(fe),P[N].c(),O(P[N],1),P[N].m(Y,null))}for(;N<P.length;N+=1)P[N].d(1);P.length=rt.length}},i(E){E&&(w||V(()=>{w=et(n,nt,{y:10,duration:300,delay:300}),w.start()}));for(let J=0;J<rt.length;J+=1)O(P[J]);E&&(Bt||V(()=>{Bt=et(L,nt,{y:10,duration:300,delay:400}),Bt.start()})),E&&(zt||V(()=>{zt=et(it,nt,{y:10,duration:300,delay:500}),zt.start()}))},o:S,d(E){E&&A(t),Ee(P,E),Vt=!1,W(ue)}}}function gn(e){let t;return{c(){t=f("div"),t.innerHTML='<div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500"></div>',a(t,"class","flex justify-center items-center h-64")},m(n,l){M(n,t,l)},p:S,i:S,o:S,d(n){n&&A(t)}}}function ve(e){let t,n,l,s,r,i;return{c(){t=f("li"),n=f("span"),n.textContent=`${e[7].name}`,l=b(),s=f("span"),s.textContent=`¥${e[7].price.toLocaleString()}`,r=b(),a(t,"class","flex justify-between")},m(c,p){M(c,t,p),o(t,n),o(t,l),o(t,s),o(t,r)},p:S,i(c){c&&(i||V(()=>{i=et(t,nt,{y:5,duration:200,delay:500+e[9]*100}),i.start()}))},o:S,d(c){c&&A(t)}}}function yn(e){let t,n,l,s,r,i,c;function p(d,_){return d[1]?gn:bn}let u=p(e),m=u(e);return{c(){t=f("div"),n=f("div"),l=f("h2"),l.textContent="見積り結果",s=b(),m.c(),a(l,"class","text-xl font-bold mb-6"),a(n,"class","bg-white p-6 rounded-lg shadow-md"),a(t,"class","max-w-4xl mx-auto")},m(d,_){M(d,t,_),o(t,n),o(n,l),o(n,s),m.m(n,null),c=!0},p(d,[_]){u===(u=p(d))&&m?m.p(d,_):(m.d(1),m=u(d),m&&(m.c(),O(m,1),m.m(n,null)))},i(d){c||(O(m),d&&V(()=>{c&&(i&&i.end(1),r=et(t,nt,{y:20,duration:400,delay:200}),r.start())}),c=!0)},o(d){r&&r.invalidate(),d&&(i=Ut(t,It,{})),c=!1},d(d){d&&A(t),m.d(),d&&i&&i.end()}}}function vn(e,t,n){let{estimationData:l={}}=t;const s=Zt();let r=!1,i={totalPrice:0,materials:[],laborCost:0,deliveryDate:"",notes:""};async function c(){n(1,r=!0),await new Promise(m=>setTimeout(m,1500)),n(1,r=!1)}async function p(){n(1,r=!0),await new Promise(m=>setTimeout(m,1e3)),n(1,r=!1)}const u=()=>s("back");return e.$$set=m=>{"estimationData"in m&&n(0,l=m.estimationData)},[l,r,s,i,c,p,u]}class $n extends Ct{constructor(t){super(),kt(this,t,vn,yn,$t,{estimationData:0})}}function xn(e){let t,n;return t=new $n({props:{estimationData:e[1]}}),t.$on("back",e[7]),{c(){Ht(t.$$.fragment)},m(l,s){xt(t,l,s),n=!0},p(l,s){const r={};s&2&&(r.estimationData=l[1]),t.$set(r)},i(l){n||(O(t.$$.fragment,l),n=!0)},o(l){Q(t.$$.fragment,l),n=!1},d(l){wt(t,l)}}}function wn(e){let t,n,l;function s(i){e[4](i)}let r={};return e[1]!==void 0&&(r.estimationData=e[1]),t=new hn({props:r}),qt.push(()=>qe(t,"estimationData",s)),t.$on("next",e[5]),t.$on("back",e[6]),{c(){Ht(t.$$.fragment)},m(i,c){xt(t,i,c),l=!0},p(i,c){const p={};!n&&c&2&&(n=!0,p.estimationData=i[1],Se(()=>n=!1)),t.$set(p)},i(i){l||(O(t.$$.fragment,i),l=!0)},o(i){Q(t.$$.fragment,i),l=!1},d(i){wt(t,i)}}}function kn(e){let t,n,l;function s(i){e[2](i)}let r={};return e[1]!==void 0&&(r.estimationData=e[1]),t=new fn({props:r}),qt.push(()=>qe(t,"estimationData",s)),t.$on("next",e[3]),{c(){Ht(t.$$.fragment)},m(i,c){xt(t,i,c),l=!0},p(i,c){const p={};!n&&c&2&&(n=!0,p.estimationData=i[1],Se(()=>n=!1)),t.$set(p)},i(i){l||(O(t.$$.fragment,i),l=!0)},o(i){Q(t.$$.fragment,i),l=!1},d(i){wt(t,i)}}}function Cn(e){let t;return{c(){t=f("div"),t.innerHTML='<div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary"></div>',a(t,"class","flex justify-center items-center h-64")},m(n,l){M(n,t,l)},p:S,i:S,o:S,d(n){n&&A(t)}}}function Dn(e){let t,n,l,s,r,i,c;n=new rn({});const p=[Cn,kn,wn,xn],u=[];function m(d,_){return d[0]==="form"?1:d[0]==="image"?2:d[0]==="result"?3:-1}return~(r=m(e))&&(i=u[r]=p[r](e)),{c(){t=f("main"),Ht(n.$$.fragment),l=b(),s=f("div"),i&&i.c(),a(s,"class","container mx-auto px-4 py-8"),a(t,"class","min-h-screen bg-background")},m(d,_){M(d,t,_),xt(n,t,null),o(t,l),o(t,s),~r&&u[r].m(s,null),c=!0},p(d,[_]){let v=r;r=m(d),r===v?~r&&u[r].p(d,_):(i&&(te(),Q(u[v],1,1,()=>{u[v]=null}),ee()),~r?(i=u[r],i?i.p(d,_):(i=u[r]=p[r](d),i.c()),O(i,1),i.m(s,null)):i=null)},i(d){c||(O(n.$$.fragment,d),O(i),c=!0)},o(d){Q(n.$$.fragment,d),Q(i),c=!1},d(d){d&&A(t),wt(n),~r&&u[r].d()}}}function En(e,t,n){let l="form",s={};Pe(()=>{document.documentElement.classList.add("bg-background")});function r(d){s=d,n(1,s)}const i=()=>n(0,l="image");function c(d){s=d,n(1,s)}return[l,s,r,i,c,()=>n(0,l="result"),()=>n(0,l="form"),()=>n(0,l="image")]}class Nn extends Ct{constructor(t){super(),kt(this,t,En,Dn,$t,{})}}new Nn({target:document.getElementById("app")});
